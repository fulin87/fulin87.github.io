<!DOCTYPE html>
<html lang="" color-mode="light">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="keywords" content="" />
  <meta name="author" content="fuliln" />
  <meta name="description" content="" />
  
  
  <title>
    
      Linux基础知识点三之硬件信息 
      
      
      |
    
     水货程序员的笔记
  </title>

  
    <link rel="apple-touch-icon" href="/content/image/manman.jpg">
    <link rel="icon" href="/content/image/manman.ico">
  

  <!-- Raleway-Font -->
  <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">

  <!-- hexo site css -->
  
<link rel="stylesheet" href="/content/css/color-scheme.css">
<link rel="stylesheet" href="/content/css/base.css">
<link rel="stylesheet" href="/content/iconfont/iconfont.css">
<link rel="stylesheet" href="/content/css/github-markdown.css">
<link rel="stylesheet" href="/content/css/highlight.css">
<link rel="stylesheet" href="/content/css/comments.css">


  <!-- jquery3.3.1 -->
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

  <!-- fancybox -->
  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  <script async src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  
<script src="/content/js/fancybox.js"></script>


  

  <script>
    var html = document.documentElement
    const colorMode = localStorage.getItem('color-mode')
    if (colorMode) {
      document.documentElement.setAttribute('color-mode', colorMode)
    }
  </script>

<meta name="generator" content="Hexo 5.4.0"></head>


  <body>
    <div id="app">
      <div class="header">
  <div class="avatar">
    <a href="/">
      <!-- 头像取消懒加载，添加no-lazy -->
      
        <img src="/content/image/manli.jpg" alt="">
      
    </a>
    <div class="nickname"><a href="/">林</a></div>
  </div>
  <div class="navbar">
    <ul>
      
        <li class="nav-item" data-path="/content/">
          <a href="/content/">Home</a>
        </li>
      
        <li class="nav-item" data-path="/content/archives/">
          <a href="/content/archives/">Archives</a>
        </li>
      
        <li class="nav-item" data-path="/content/categories/">
          <a href="/content/categories/">Categories</a>
        </li>
      
        <li class="nav-item" data-path="/content/about/">
          <a href="/content/about/">About</a>
        </li>
      
    </ul>
  </div>
</div>


<script src="/content/js/activeNav.js"></script>



      <div class="flex-container">
        <!-- 文章详情页，展示文章具体内容，url形式：https://yoursite/文章标题/ -->
<!-- 同时为「标签tag」，「朋友friend」，「分类categories」，「关于about」页面的承载页面，具体展示取决于page.type -->

<!-- LaTex Display -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']]
  }
};
</script>



  

  

  

  
  <!-- 文章内容页 url形式：https://yoursite/文章标题/ -->
  <div class="container post-details" id="post-details">
    <div class="post-content">
      <div class="post-title">Linux基础知识点三之硬件信息</div>
      <div class="post-attach">
        <span class="post-pubtime">
          <i class="iconfont icon-updatetime" title="Update time"></i>
          2016-08-21 13:07:11
        </span>
        
              <span class="post-categories">
                <i class="iconfont icon-bookmark" title="Categories"></i>
                
                <span class="span--category">
                  <a href="/content/categories/linux/" title="linux">
                    <b>#</b> linux
                  </a>
                </span>
                
              </span>
          
      </div>
      <div class="markdown-body">
        <blockquote>
<p>Linux不像windows那么直观，或者是我自己使用windows时间很长了，在windows下，对磁盘，分区，硬件信息都能很好的查看和理解，但是自从接触Linux后，长期以来，对Linux下的硬件；分区和目录的关系一直比较模糊，所以，特意花了一些时间来整理。</p>
</blockquote>
<h2 id="Linux中查阅硬件信息"><a href="#Linux中查阅硬件信息" class="headerlink" title="Linux中查阅硬件信息"></a>Linux中查阅硬件信息</h2><h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h3><p> 命令：<code>lscpu</code> 可以显示CPU的统计信息</p>
<pre><code>Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                1
On-line CPU(s) list:   0
Thread(s) per core:    1
Core(s) per socket:    1
Socket(s):             1
NUMA node(s):          1
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 44
Stepping:              2
CPU MHz:               2660.000
BogoMIPS:              5320.00
Hypervisor vendor:     VMware
Virtualization type:   full
L1d cache:             32K
L1i cache:             32K
L2 cache:              256K
L3 cache:              12288K
NUMA node0 CPU(s):     0
</code></pre>
<p> 命令 <code>cat /proc/cpuinfo</code> 可以知道每个cpu信息，如每个CPU的型号，主频等</p>
<pre><code>processor    : 0
vendor_id    : GenuineIntel
cpu family    : 6
model        : 44
model name    : Intel(R) Xeon(R) CPU           E5640  @ 2.67GHz
stepping    : 2
microcode    : 21
cpu MHz        : 2660.000
cache size    : 12288 KB
physical id    : 0
siblings    : 1
core id        : 0
cpu cores    : 1
apicid        : 0
initial apicid    : 0
fpu        : yes
fpu_exception    : yes
cpuid level    : 11
wp        : yes
flags        : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss syscall nx rdtscp lm constant_tsc up arch_perfmon pebs bts xtopology tsc_reliable nonstop_tsc aperfmperf unfair_spinlock pni pclmulqdq ssse3 cx16 sse4_1 sse4_2 x2apic popcnt aes hypervisor lahf_lm ida arat dts
bogomips    : 5320.00
clflush size    : 64
cache_alignment    : 64
address sizes    : 40 bits physical, 48 bits virtual
power management:
</code></pre>
<h3 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h3><p> 命令 <code>free -m</code> 查看内存的统计信息</p>
<pre><code>             total       used       free     shared    buffers     cached
Mem:          1878       1026        852         31        173        394
-/+ buffers/cache:        458       1419
Swap:         5119         49       5070
</code></pre>
<p> 命令 <code>cat /proc/meminfo</code> 查看内存的详细使用情况</p>
<pre><code>MemTotal:        1923396 kB
MemFree:          873108 kB
Buffers:          177256 kB
Cached:           403736 kB
SwapCached:         1788 kB
Active:           461804 kB
Inactive:         340180 kB
Active(anon):     126352 kB
Inactive(anon):   130748 kB
Active(file):     335452 kB
Inactive(file):   209432 kB
Unevictable:        4276 kB
Mlocked:            4276 kB
SwapTotal:       5242876 kB
SwapFree:        5191972 kB
Dirty:               152 kB
Writeback:             4 kB
AnonPages:        224024 kB
Mapped:            39184 kB
Shmem:             32668 kB
Slab:             184136 kB
SReclaimable:     156816 kB
SUnreclaim:        27320 kB
KernelStack:        1408 kB
PageTables:        25368 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:     6204572 kB
Committed_AS:     896844 kB
VmallocTotal:   34359738367 kB
VmallocUsed:      143552 kB
VmallocChunk:   34359590536 kB
HardwareCorrupted:     0 kB
AnonHugePages:     69632 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
DirectMap4k:        8192 kB
DirectMap2M:     2088960 kB
</code></pre>
<p> 命令 <code>dmidecode -t memory</code> 查看内存硬件信息,这里不做过多介绍</p>
<pre><code># dmidecode 2.12
SMBIOS 2.4 present.

Handle 0x0044, DMI type 5, 46 bytes
Memory Controller Information
        Error Detecting Method: None
        Error Correcting Capabilities:
                None
        Supported Interleave: One-way Interleave
        Current Interleave: One-way Interleave
        Maximum Memory Module Size: 32768 MB
        Maximum Total Memory Size: 491520 MB
        Supported Speeds:
                70 ns
                60 ns
        Supported Memory Types:
                FPM
                EDO
                DIMM
                SDRAM
        Memory Module Voltage: 3.3 V
        Associated Memory Slots: 15
                0x0045
                0x0046
                0x0047
                0x0048
                0x0049
                0x004A
                0x004B
                0x004C
                0x004D
                0x004E
                0x004F
                0x0050
                0x0051
                0x0052
                0x0053
        Enabled Error Correcting Capabilities:
                None

Handle 0x0045, DMI type 6, 12 bytes
Memory Module Information
        Socket Designation: RAM socket #0
        Bank Connections: None
        Current Speed: Unknown
        Type: EDO DIMM
        Installed Size: 2048 MB (Single-bank Connection)
        Enabled Size: 2048 MB (Single-bank Connection)
        Error Status: OK
</code></pre>
<h3 id="磁盘"><a href="#磁盘" class="headerlink" title="磁盘"></a>磁盘</h3><p> 命令 <code>lsblk</code> 查看磁盘分区分布</p>
<pre><code>NAME                         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sda                            8:0    0   30G  0 disk 
├─sda1                         8:1    0  200M  0 part /boot
└─sda2                         8:2    0 29.8G  0 part 
  ├─VolGroup00-LVswap (dm-0) 253:0    0    5G  0 lvm  [SWAP]
  └─VolGroup00-LVroot (dm-1) 253:1    0 54.8G  0 lvm  /
sdb                            8:16   0   30G  0 disk 
└─VolGroup00-LVroot (dm-1)   253:1    0 54.8G  0 lvm  /
sr0                           11:0    1 1024M  0 rom 
</code></pre>
<p> 命令 <code>fdisk -l</code> 查看磁盘和分区的详细信息</p>
<pre><code>Disk /dev/sda: 32.2 GB, 32212254720 bytes
64 heads, 32 sectors/track, 30720 cylinders
Units = cylinders of 2048 * 512 = 1048576 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x0003bbac

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           2         201      204800   83  Linux
Partition 1 does not end on cylinder boundary.
/dev/sda2             202       30720    31251456   8e  Linux LVM
Partition 2 does not end on cylinder boundary.

Disk /dev/sdb: 32.2 GB, 32212254720 bytes
64 heads, 32 sectors/track, 30720 cylinders
Units = cylinders of 2048 * 512 = 1048576 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000    

Disk /dev/mapper/VolGroup00-LVswap: 5368 MB, 5368709120 bytes
255 heads, 63 sectors/track, 652 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000    

Disk /dev/mapper/VolGroup00-LVroot: 58.8 GB, 58787364864 bytes
255 heads, 63 sectors/track, 7147 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000
</code></pre>
<p> <img src="/content/image/diskTotal.PNG"></p>
<h3 id="网卡"><a href="#网卡" class="headerlink" title="网卡"></a>网卡</h3><p> 命令 <code> lspci | grep -i &#39;eth&#39;</code> 查看网卡信息</p>
<pre><code>0b:00.0 Ethernet controller: VMware VMXNET3 Ethernet Controller (rev 01)
</code></pre>
<h3 id="BOIS"><a href="#BOIS" class="headerlink" title="BOIS"></a>BOIS</h3><p> 命令 <code>dmidecode -t bios</code> 查看当前的BOIS信息</p>
<pre><code># dmidecode 2.12
SMBIOS 2.4 present.

Handle 0x0000, DMI type 0, 24 bytes
BIOS Information
    Vendor: Phoenix Technologies LTD
    Version: 6.00
    Release Date: 04/14/2014
    Address: 0xEA050
    Runtime Size: 90032 bytes
    ROM Size: 64 kB
    Characteristics:
        ISA is supported
        PCI is supported
        PC Card (PCMCIA) is supported
        PNP is supported
        APM is supported
        BIOS is upgradeable
        BIOS shadowing is allowed
        ESCD support is available
        Boot from CD is supported
        Selectable boot is supported
        EDD is supported
        Print screen service is supported (int 5h)
        8042 keyboard services are supported (int 9h)
        Serial services are supported (int 14h)
        Printer services are supported (int 17h)
        CGA/mono video services are supported (int 10h)
        ACPI is supported
        Smart battery is supported
        BIOS boot specification is supported
        Function key-initiated network boot is supported
        Targeted content distribution is supported
    BIOS Revision: 4.6
    Firmware Revision: 0.0
</code></pre>
<h2 id="Linux中的磁盘分区和目录"><a href="#Linux中的磁盘分区和目录" class="headerlink" title="Linux中的磁盘分区和目录"></a>Linux中的磁盘分区和目录</h2><p> 首先先看看磁盘的逻辑物理结构图</p>
<p> <img src="/content/image/disk.PNG"></p>
<p> 常见的硬盘一般分为三类。IDE硬盘，SCSI硬盘和SATA硬盘。通常我们电脑上的硬盘都是IDE和SATA，而服务器一般用SCSI硬盘。SCSI的硬盘接口设备叫sd，第一块硬盘就是sda，第二块硬盘是sdb…以此类推。Linux规定，一块硬盘上主分区和扩展分区总数不能超过4个，扩展分区又可以包含逻辑分区。主分区的命名方式分别是sda1，sda2，sda3，sda4。而逻辑分区从sd5开始，没有数量限制，命名方式为sd5，sd6…sd无穷大。主分区可以简单的理解为windows下的C盘，也就是系统分区，是引导操作系统必要的分区。而逻辑分区可以简单的理解为windows下的CDE盘等等。</p>
<p> Linux磁盘分区不像windows把分区用盘符区分。在Linux中是先建立一个以根目录<code>/</code>为根节点的目录树,然后将磁盘分区挂载到相应的目录上，对于Linux文件系统的约定大致如下：</p>
<pre><code>/bin        ##存放系统的核心最常用的命令
/boot       ##内核与启动文件
/dev        ##各种设备文件
/etc        ##系统软件的配置文件
/home       ##用户的主目录，用来记录和保存的一些操作和内容
/lib        ## C编译器的库
/root       ##超级用户root的目录
/proc       ##进程的映像 
/tmp        ##临时文件存放点
/usr        ##非系统的程序和命令
/var        ##数据目录，一般数据库文件也存放在此目录下
</code></pre>
<p> 至于不同目录上挂载的分区大小分配，要根据linux文件系统的规则和作用来。</p>
<p> <code>/boot</code> 需挂载主分区，因为是内核和启动文件，不需要太大 500M 就足够用了。单独挂载boot是为了保证系统启动的稳定性，防止其他的硬盘分区坏了影响启动</p>
<p> <code>/var</code> 是数据目录，可以挂载容量大一点的分区,比如分配20G。其他依次类推</p>
<p> <code>/</code> 我的理解是一定需要给根目录挂载分区</p>
<p> 理论上来说我们可以为所有的目录都划分一个分区。没划分的文件和目录以及空余的硬盘一般都自动存放挂载到/根目录。因此如果你分区分的足够细，根目录所需的空间就很小。</p>
<p> 得一提的还有两点。第一点一般我们分区的时候都会单独划分一个swap分区，用于交换空间(也就是虚拟内存技术)，当内存满了的时候，系统会自动挑出一部分暂时不用的东西写到交换空间中用以释放内存，一般交换空间的大小不超过2G。设置的时候当内存小于2G时，swap可以设置为2G或真实内存的一半，真实大于2G就设置2G。第二点就是我们在硬盘分区的时候通常会让选择文件系统，因为Linux是以文件驱动的，用文件管理硬件，每一个硬件都映射到一个文件上进行管理，通常来说文件系统我们选择默认的ext4fs就可以了</p>
<ul>
<li>磁盘分区的实质就是针对0磁道1扇区的前446字节后面接下来的64bytes的分区表进行设置，分区工具有fdisk和parted。前者适用于小于2T的磁盘分区，后者适用于大于2T的磁盘分区。</li>
<li>一块磁盘的分区表仅有64bytes大小，仅支持4个分区表信息（主分区+扩展分区）。</li>
<li>磁盘分区的最小单位是柱面</li>
<li>扩展分区不能直接使用，还需要在扩展分区的基础上创建逻辑分区</li>
<li>扩展分区有自己的分区表，因此，扩展分区下面的逻辑分区可以有多个</li>
</ul>
<p> <em>需要深刻的理解Linux的文件系统和系统分区，这里和 windows 是有很大区别的，如果不理解透彻，会带来很多的疑问</em></p>
<h2 id="网友的精彩总结"><a href="#网友的精彩总结" class="headerlink" title="网友的精彩总结"></a>网友的精彩总结</h2><p>  <strong><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/22484307">知乎的总结</a></strong></p>
<p>  <strong><a target="_blank" rel="noopener" href="http://blog.csdn.net/tianxueer/article/details/2689117">磁盘的物理结构</a></strong></p>
<p>  <strong><a target="_blank" rel="noopener" href="http://baike.baidu.com/link?url=fdduBeLwvNeGlVfEYj-jT7QIe5FNgLKAfJKgdha6HkIMIQxIsaAYxWSTc_zbHfGudbiCOlEnHVGNHUXR2GIdt2OP3t90ByA4DLXZymMaqFdeturBjey9DW9jLULzJqjMMRNZn-PAahrdvPMvIvQRfa">Linux中磁盘分区</a></strong></p>

      </div>
      
        <div class="prev-or-next">
          <div class="post-foot-next">
            
              <a href="/content/2016/08/20/2016-08-20-SSH2/" target="_self">
                <i class="iconfont icon-chevronleft"></i>
                <span>Prev</span>
              </a>
            
          </div>
          <div class="post-attach">
            <span class="post-pubtime">
              <i class="iconfont icon-updatetime" title="Update time"></i>
              2016-08-21 13:07:11
            </span>
            
                  <span class="post-categories">
                    <i class="iconfont icon-bookmark" title="Categories"></i>
                    
                    <span class="span--category">
                      <a href="/content/categories/linux/" title="linux">
                        <b>#</b> linux
                      </a>
                    </span>
                    
                  </span>
              
          </div>
          <div class="post-foot-prev">
            
              <a href="/content/2016/08/22/2016-08-22-SSH4/" target="_self">
                <span>Next</span>
                <i class="iconfont icon-chevronright"></i>
              </a>
            
          </div>
        </div>
      
    </div>
    
  <div id="btn-catalog" class="btn-catalog">
    <i class="iconfont icon-catalog"></i>
  </div>
  <div class="post-catalog hidden" id="catalog">
    <div class="title">Contents</div>
    <div class="catalog-content">
      
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E4%B8%AD%E6%9F%A5%E9%98%85%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF"><span class="toc-text">Linux中查阅硬件信息</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CPU"><span class="toc-text">CPU</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98"><span class="toc-text">内存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A3%81%E7%9B%98"><span class="toc-text">磁盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E5%8D%A1"><span class="toc-text">网卡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BOIS"><span class="toc-text">BOIS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux%E4%B8%AD%E7%9A%84%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E5%92%8C%E7%9B%AE%E5%BD%95"><span class="toc-text">Linux中的磁盘分区和目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E5%8F%8B%E7%9A%84%E7%B2%BE%E5%BD%A9%E6%80%BB%E7%BB%93"><span class="toc-text">网友的精彩总结</span></a></li></ol>
      
    </div>
  </div>

  
<script src="/content/js/catalog.js"></script>




    
      <div class="comments-container">
        







      </div>
    
  </div>


        
<div class="footer">
  <div class="social">
    <ul>
      
        <li>
          <a title="github" target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">
            <i class="iconfont icon-github"></i>
          </a>
        </li>
      
    </ul>
  </div>
  
    
    <div class="footer-more">
      
        <a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Copyright © 2022 Oranges</a>
        
    </div>
  
    
    <div class="footer-more">
      
        <a target="_blank" rel="noopener" href="https://github.com/zchengsite/hexo-theme-oranges">Theme by Oranges | Powered by Hexo</a>
        
    </div>
  
</div>

      </div>

      <div class="tools-bar">
        <div class="back-to-top tools-bar-item hidden">
  <a href="javascript: void(0)">
    <i class="iconfont icon-chevronup"></i>
  </a>
</div>


<script src="/content/js/backtotop.js"></script>



        
  <div class="search-icon tools-bar-item" id="search-icon">
    <a href="javascript: void(0)">
      <i class="iconfont icon-search"></i>
    </a>
  </div>

  <div class="search-overlay hidden">
    <div class="search-content" tabindex="0">
      <div class="search-title">
        <span class="search-icon-input">
          <a href="javascript: void(0)">
            <i class="iconfont icon-search"></i>
          </a>
        </span>
        
          <input type="text" class="search-input" id="search-input" placeholder="Search...">
        
        <span class="search-close-icon" id="search-close-icon">
          <a href="javascript: void(0)">
            <i class="iconfont icon-close"></i>
          </a>
        </span>
      </div>
      <div class="search-result" id="search-result"></div>
    </div>
  </div>

  <script type="text/javascript">
    var inputArea = document.querySelector("#search-input")
    var searchOverlayArea = document.querySelector(".search-overlay")

    inputArea.onclick = function() {
      getSearchFile()
      this.onclick = null
    }

    inputArea.onkeydown = function() {
      if(event.keyCode == 13)
        return false
    }

    function openOrHideSearchContent() {
      let isHidden = searchOverlayArea.classList.contains('hidden')
      if (isHidden) {
        searchOverlayArea.classList.remove('hidden')
        document.body.classList.add('hidden')
        // inputArea.focus()
      } else {
        searchOverlayArea.classList.add('hidden')
        document.body.classList.remove('hidden')
      }
    }

    function blurSearchContent(e) {
      if (e.target === searchOverlayArea) {
        openOrHideSearchContent()
      }
    }

    document.querySelector("#search-icon").addEventListener("click", openOrHideSearchContent, false)
    document.querySelector("#search-close-icon").addEventListener("click", openOrHideSearchContent, false)
    searchOverlayArea.addEventListener("click", blurSearchContent, false)

    var searchFunc = function (path, search_id, content_id) {
      'use strict';
      var $input = document.getElementById(search_id);
      var $resultContent = document.getElementById(content_id);
      $resultContent.innerHTML = "<ul><span class='local-search-empty'>First search, index file loading, please wait...<span></ul>";
      $.ajax({
        // 0x01. load xml file
        url: path,
        dataType: "xml",
        success: function (xmlResponse) {
          // 0x02. parse xml file
          var datas = $("entry", xmlResponse).map(function () {
            return {
              title: $("title", this).text(),
              content: $("content", this).text(),
              url: $("url", this).text()
            };
          }).get();
          $resultContent.innerHTML = "";

          $input.addEventListener('input', function () {
            // 0x03. parse query to keywords list
            var str = '<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length <= 0) {
              return;
            }
            // 0x04. perform local searching
            datas.forEach(function (data) {
              var isMatch = true;
              var content_index = [];
              if (!data.title || data.title.trim() === '') {
                data.title = "Untitled";
              }
              var orig_data_title = data.title.trim();
              var data_title = orig_data_title.toLowerCase();
              var orig_data_content = data.content.trim().replace(/<[^>]+>/g, "");
              var data_content = orig_data_content.toLowerCase();
              var data_url = data.url;
              var index_title = -1;
              var index_content = -1;
              var first_occur = -1;
              // only match artiles with not empty contents
              if (data_content !== '') {
                keywords.forEach(function (keyword, i) {
                  index_title = data_title.indexOf(keyword);
                  index_content = data_content.indexOf(keyword);

                  if (index_title < 0 && index_content < 0) {
                    isMatch = false;
                  } else {
                    if (index_content < 0) {
                      index_content = 0;
                    }
                    if (i == 0) {
                      first_occur = index_content;
                    }
                    // content_index.push({index_content:index_content, keyword_len:keyword_len});
                  }
                });
              } else {
                isMatch = false;
              }
              // 0x05. show search results
              if (isMatch) {
                str += "<li><a href='" + data_url + "' class='search-result-title'>" + orig_data_title + "</a>";
                var content = orig_data_content;
                if (first_occur >= 0) {
                  // cut out 100 characters
                  var start = first_occur - 20;
                  var end = first_occur + 80;

                  if (start < 0) {
                    start = 0;
                  }

                  if (start == 0) {
                    end = 100;
                  }

                  if (end > content.length) {
                    end = content.length;
                  }

                  var match_content = content.substr(start, end);

                  // highlight all keywords
                  keywords.forEach(function (keyword) {
                    var regS = new RegExp(keyword, "gi");
                    match_content = match_content.replace(regS, "<span class=\"search-keyword\">" + keyword + "</span>");
                  });

                  str += "<p class=\"search-result-abstract\">" + match_content + "...</p>"
                }
                str += "</li>";
              }
            });
            str += "</ul>";
            if (str.indexOf('<li>') === -1) {
              return $resultContent.innerHTML = "<ul><span class='local-search-empty'>No result<span></ul>";
            }
            $resultContent.innerHTML = str;
          });
        },
        error: function(xhr, status, error) {
          $resultContent.innerHTML = ""
          if (xhr.status === 404) {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The search.xml file was not found, please refer to：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>";
          } else {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The request failed, Try to refresh the page or try again later.<span></ul>";
          }
        }
      });
      $(document).on('click', '#search-close-icon', function() {
        $('#search-input').val('');
        $('#search-result').html('');
      });
    }

    var getSearchFile = function() {
        var path = "/search.xml";
        searchFunc(path, 'search-input', 'search-result');
    }
  </script>




        
  <div class="tools-bar-item theme-icon" id="switch-color-scheme">
    <a href="javascript: void(0)">
      <i id="theme-icon" class="iconfont icon-moon"></i>
    </a>
  </div>

  
<script src="/content/js/colorscheme.js"></script>





        
  
    <div class="share-icon tools-bar-item">
      <a href="javascript: void(0)" id="share-icon">
        <i class="iconfont iconshare"></i>
      </a>
      <div class="share-content hidden">
        
          <a class="share-item" href="https://twitter.com/intent/tweet?text=' + Linux%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9%E4%B8%89%E4%B9%8B%E7%A1%AC%E4%BB%B6%E4%BF%A1%E6%81%AF + '&url=' + http%3A%2F%2Fcolorful.ren%2Fcontent%2F2016%2F08%2F21%2F2016-08-21-SSH3%2F + '" target="_blank" title="Twitter">
            <i class="iconfont icon-twitter"></i>
          </a>
        
        
          <a class="share-item" href="https://www.facebook.com/sharer.php?u=http://colorful.ren/content/2016/08/21/2016-08-21-SSH3/" target="_blank" title="Facebook">
            <i class="iconfont icon-facebooksquare"></i>
          </a>
        
      </div>
    </div>
  
  
<script src="/content/js/shares.js"></script>



      </div>
    </div>
  </body>
</html>
